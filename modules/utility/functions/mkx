#
# Marks files as executable for all users who have read permission
#
# Authors:
#   Tobias Wohlfarth <tobias.wohlfarth@googlemail.com>
#

mkx() {
  RECURSIVE=0
  while getopts ":r:R:" opt; do
    case $opt in
      r|R)
        RECURSIVE=1
        shift
        ;;
      \?)
      ;;
    esac
  done

  if [ $RECURSIVE -eq 1 ]
  then
    find $@ -perm /u+r -print0 | xargs --null -r chmod u+x
    find $@ -perm /g+r -print0 | xargs --null -r chmod g+x
    find $@ -perm /o+r -print0 | xargs --null -r chmod o+x
  else
    find $@ -maxdepth 0 -perm /u+r -print0 | xargs --null -r chmod u+x
    find $@ -maxdepth 0 -perm /g+r -print0 | xargs --null -r chmod g+x
    find $@ -maxdepth 0 -perm /o+r -print0 | xargs --null -r chmod o+x
  fi
}

mkx "$@"
